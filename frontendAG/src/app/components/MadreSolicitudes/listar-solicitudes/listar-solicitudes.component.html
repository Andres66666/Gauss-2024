<div class="container-fluid">
  <h2 class="text-center">Lista de Solicitudes</h2>
  <h1>nombre :{{ nombreUsuario }}</h1>
  <div class="mb-3 d-flex align-items-center">
    <input
      type="text"
      class="form-control"
      placeholder="Buscar por Equipo"
      [(ngModel)]="searchTerm"
    />
    <button class="btn btn-success ms-2" (click)="registrarSolicitudes()">
      Registrar
    </button>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered w-100">
      <thead>
        <tr>
          <th class="text-center">Código de Solicitud</th>
          <th class="text-center">Fecha de Solicitud</th>
          <th class="text-center">Fecha de Retorno Estimada</th>
          <th class="text-center">Fecha de Retorno Real</th>
          <th class="text-center">Estado</th>
          <th class="text-center">Motivo de Uso</th>
          <th class="text-center">Fecha de Uso</th>
          <th class="text-center">Equipo</th>
          <th class="text-center">Usuario</th>
          <th class="text-center">Descripción de Falla</th>
          <th class="text-center">Cantidad de Fallas</th>
          <th class="text-center">Horas de Uso</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let solicitud of filteredSolicitudes()">
          <td class="text-start">{{ solicitud.codigoSolicitud }}</td>
          <td class="text-start">
            {{ solicitud.fecha_solicitud | date : "dd/MM/yyyy" }}
          </td>
          <td class="text-start">
            {{ solicitud.fecha_retorno_estimada | date : "dd/MM/yyyy" }}
          </td>
          <td class="text-start">
            {{ solicitud.fecha_retorno_real | date : "dd/MM/yyyy" }}
          </td>
          <td class="text-start">{{ solicitud.estado }}</td>
          <td class="text-start">{{ solicitud.motivo_uso }}</td>
          <td class="text-start">
            {{ solicitud.fecha_uso | date : "dd/MM/yyyy" }}
          </td>
          <td class="text-start">{{ solicitud.equipo.nombreEquipo }}</td>
          <td class="text-start">{{ solicitud.usuario.nombreUsuario }}</td>
          <td class="text-start">{{ solicitud.descripcion_falla }}</td>
          <td class="text-start">
            <input
              type="number"
              [(ngModel)]="solicitud.cantidad_fallas_solicitud"
              class="form-control"
              min="0"
            />
          </td>
          <td class="text-start">
            <input
              type="number"
              [(ngModel)]="solicitud.horas_uso_solicitud"
              class="form-control"
              min="0"
            />
          </td>
          <td>
            <button
              class="btn btn-primary"
              (click)="editarSolicitudes(solicitud.id)"
            >
              Editar
            </button>
            <button class="btn btn-success ms-2">Aprobar Solicitud</button>
            <button
              class="btn btn-warning ms-2"
              (click)="concretarSolicitud(solicitud)"
            >
              Concretar/Finalizar
            </button>
            <button class="btn btn-danger ms-2">Cancelar/Rechazar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
